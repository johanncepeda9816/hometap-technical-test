Watching for file changes with StatReloader
Processing request for address: Tampa, Florida
Error retrieving from cache: Error 61 connecting to localhost:6379. Connection refused.
No cache found for Tampa, Florida. Fetching from providers...
Starting data fetch from 2 providers for address: Tampa, Florida
Processing provider: provider1
Error retrieving from cache: Error 61 connecting to localhost:6379. Connection refused.
Initializing service class for provider1: properties.services.provider1.Provider1Service
Submitting request to provider1
Processing provider: provider2
Error retrieving from cache: Error 61 connecting to localhost:6379. Connection refused.
Initializing service class for provider2: properties.services.provider2.Provider2Service
Submitting request to provider2
Waiting for response from provider1 (timeout: 30s)
Starting new HTTPS connection (1): property-detail-api.fly.dev:443
Starting new HTTPS connection (1): property-detail-api.fly.dev:443
https://property-detail-api.fly.dev:443 "GET /provider-1/property?address=Tampa%2C+Florida HTTP/1.1" 200 None
https://property-detail-api.fly.dev:443 "GET /provider-2/property?address=Tampa%2C+Florida HTTP/1.1" 200 None
Received response from provider1
Raw response from provider1: {
  "data": {
    "id": "-Unknown-UNKNOWN-00000",
    "formattedAddress": " Unknown UNKNOWN 00000",
    "addressLine1": "",
    "addressLine2": "Apt 12",
    "city": "Unknown",
    "state": "UNKNOWN",
    "zipCode": "00000",
    "county": "Unknown",
    "latitude": 35.807501,
    "longitude": -84.048499,
    "propertyType": "Single Family",
    "bedrooms": 3,
    "bathrooms": 3,
    "squareFootage": 1599,
    "lotSizeSqFt": 5714,
    "yearBuilt": 1963,
    "assessorID": "75282-156-3989",
    "legalDescription": "CB 7931 BLK 5 LOT 41",
    "subdivision": "CONV A/S CODE",
    "zoning": "RS",
    "lastSaleDate": "2013-08-27T00:00:00.000Z",
    "lastSalePrice": 151846,
    "hoa": {
      "fee": 23
    },
    "features": {
      "architectureType": "Ranch",
      "cooling": true,
      "coolingType": "Central",
      "exteriorType": "Vinyl",
      "fireplace": false,
      "fireplaceType": "Prefabricated",
      "floorCount": 3,
      "foundationType": "Basement",
      "garage": true,
      "garageSpaces": 2,
      "garageType": "Attached",
      "heating": true,
      "heatingType": "Electric",
      "pool": true,
      "poolType": "Concrete",
      "roofType": "Asphalt",
      "roomCount": 9,
      "unitCount": 4,
      "viewType": "City",
      "septicSystem": true
    },
    "taxAssessments": {
      "2023": {
        "year": 2023,
        "value": 332822,
        "land": 91524,
        "improvements": 320395
      }
    },
    "propertyTaxes": {
      "2023": {
        "year": 2023,
        "total": 4674
      }
    },
    "history": {
      "2017-12-17": {
        "event": "Sale",
        "date": "2015-01-26T00:00:00.000Z",
        "price": 455296
      }
    }
  },
  "cached": false
}
Waiting for response from provider2 (timeout: 30s)
Received response from provider2
Raw response from provider2: {
  "data": {
    "ID": "-Unknown-UNKNOWN-00000",
    "NormalizedAddress": " Unknown UNKNOWN 00000",
    "Address1": "",
    "Address2": "Apt 12",
    "City": "Unknown",
    "State": "UNKNOWN",
    "PostalCode": "00000",
    "ArchitecturalStyle": "Ranch",
    "PropertyType": "Single Family",
    "Bedrooms": 3,
    "Bathrooms": 3,
    "SquareFootage": 1599,
    "LotSizeAcres": 0.13,
    "YearConstructed": 1963,
    "HomeownerAssociationFee": 23,
    "LastSaleDate": "2013-08-27T00:00:00.000Z",
    "LastSalePrice": 151846,
    "RoomCount": 9,
    "UnitCount": 4,
    "GarageSpaces": 2,
    "GarageType": "Attached",
    "SepticSystem": true,
    "Cooling": "Central",
    "Heating": "Electric",
    "SalePrice": 151846
  },
  "cached": true
}
Completed data fetch from all providers for address: Tampa, Florida
Raw result from provider1: {
  "data": {
    "id": "-Unknown-UNKNOWN-00000",
    "formattedAddress": " Unknown UNKNOWN 00000",
    "addressLine1": "",
    "addressLine2": "Apt 12",
    "city": "Unknown",
    "state": "UNKNOWN",
    "zipCode": "00000",
    "county": "Unknown",
    "latitude": 35.807501,
    "longitude": -84.048499,
    "propertyType": "Single Family",
    "bedrooms": 3,
    "bathrooms": 3,
    "squareFootage": 1599,
    "lotSizeSqFt": 5714,
    "yearBuilt": 1963,
    "assessorID": "75282-156-3989",
    "legalDescription": "CB 7931 BLK 5 LOT 41",
    "subdivision": "CONV A/S CODE",
    "zoning": "RS",
    "lastSaleDate": "2013-08-27T00:00:00.000Z",
    "lastSalePrice": 151846,
    "hoa": {
      "fee": 23
    },
    "features": {
      "architectureType": "Ranch",
      "cooling": true,
      "coolingType": "Central",
      "exteriorType": "Vinyl",
      "fireplace": false,
      "fireplaceType": "Prefabricated",
      "floorCount": 3,
      "foundationType": "Basement",
      "garage": true,
      "garageSpaces": 2,
      "garageType": "Attached",
      "heating": true,
      "heatingType": "Electric",
      "pool": true,
      "poolType": "Concrete",
      "roofType": "Asphalt",
      "roomCount": 9,
      "unitCount": 4,
      "viewType": "City",
      "septicSystem": true
    },
    "taxAssessments": {
      "2023": {
        "year": 2023,
        "value": 332822,
        "land": 91524,
        "improvements": 320395
      }
    },
    "propertyTaxes": {
      "2023": {
        "year": 2023,
        "total": 4674
      }
    },
    "history": {
      "2017-12-17": {
        "event": "Sale",
        "date": "2015-01-26T00:00:00.000Z",
        "price": 455296
      }
    }
  },
  "cached": false
}
Raw result from provider2: {
  "data": {
    "ID": "-Unknown-UNKNOWN-00000",
    "NormalizedAddress": " Unknown UNKNOWN 00000",
    "Address1": "",
    "Address2": "Apt 12",
    "City": "Unknown",
    "State": "UNKNOWN",
    "PostalCode": "00000",
    "ArchitecturalStyle": "Ranch",
    "PropertyType": "Single Family",
    "Bedrooms": 3,
    "Bathrooms": 3,
    "SquareFootage": 1599,
    "LotSizeAcres": 0.13,
    "YearConstructed": 1963,
    "HomeownerAssociationFee": 23,
    "LastSaleDate": "2013-08-27T00:00:00.000Z",
    "LastSalePrice": 151846,
    "RoomCount": 9,
    "UnitCount": 4,
    "GarageSpaces": 2,
    "GarageType": "Attached",
    "SepticSystem": true,
    "Cooling": "Central",
    "Heating": "Electric",
    "SalePrice": 151846
  },
  "cached": true
}
Processing data from provider: provider1
Using mapping for provider1: {'square_footage': 'squareFootage', 'lot_size_acres': ('lotSizeSqFt', <function convert_sqft_to_acres at 0x110768720>), 'year_built': 'yearBuilt', 'property_type': 'propertyType', 'bedrooms': 'bedrooms', 'bathrooms': 'bathrooms', 'room_count': ('features', 'roomCount'), 'septic_system': ('features', 'septicSystem'), 'sale_price': 'lastSalePrice'}
Standardized data for provider1: {
  "square_footage": 1599,
  "lot_size_acres": 0.13,
  "year_built": 1963,
  "property_type": "Single Family",
  "bedrooms": 3,
  "bathrooms": 3,
  "room_count": 9,
  "septic_system": "Yes",
  "sale_price": 151846,
  "sale_price_formatted": "$151,846",
  "provider": "Provider 1"
}
Data from provider1 successfully validated
Error caching data: Error 61 connecting to localhost:6379. Connection refused.
Processing data from provider: provider2
Using mapping for provider2: {'square_footage': 'SquareFootage', 'lot_size_acres': 'LotSizeAcres', 'year_built': 'YearConstructed', 'property_type': 'PropertyType', 'bedrooms': 'Bedrooms', 'bathrooms': 'Bathrooms', 'room_count': 'RoomCount', 'septic_system': 'SepticSystem', 'sale_price': 'SalePrice'}
Standardized data for provider2: {
  "square_footage": 1599,
  "lot_size_acres": 0.13,
  "year_built": 1963,
  "property_type": "Single Family",
  "bedrooms": 3,
  "bathrooms": 3,
  "room_count": 9,
  "septic_system": "Yes",
  "sale_price": 151846,
  "sale_price_formatted": "$151,846",
  "provider": "Provider 2"
}
Data from provider2 successfully validated
Error caching data: Error 61 connecting to localhost:6379. Connection refused.
Total providers processed: 2
Final data from provider Provider 1: {
  "square_footage": 1599,
  "lot_size_acres": 0.13,
  "year_built": 1963,
  "property_type": "Single Family",
  "bedrooms": 3,
  "bathrooms": 3.0,
  "room_count": 9,
  "septic_system": "Yes",
  "sale_price": 151846,
  "provider": "Provider 1",
  "cached": false
}
Final data from provider Provider 2: {
  "square_footage": 1599,
  "lot_size_acres": 0.13,
  "year_built": 1963,
  "property_type": "Single Family",
  "bedrooms": 3,
  "bathrooms": 3.0,
  "room_count": 9,
  "septic_system": "Yes",
  "sale_price": 151846,
  "provider": "Provider 2",
  "cached": false
}
Error caching data: Error 61 connecting to localhost:6379. Connection refused.
/Users/johann/Desktop/technical-test-template/backend/backend/settings.py changed, reloading.
Watching for file changes with StatReloader
/Users/johann/Desktop/technical-test-template/backend/properties/settings/cache_settings.py changed, reloading.
Watching for file changes with StatReloader
/Users/johann/Desktop/technical-test-template/backend/backend/settings.py changed, reloading.
Watching for file changes with StatReloader
Watching for file changes with StatReloader
Processing request for address: Tampa, Florida
Cache miss for property:24f40f3aa97bd5a6a68f107fbefb3a19
No cache found for Tampa, Florida. Fetching from providers...
Starting data fetch from 2 providers for address: Tampa, Florida
Processing provider: provider1
Cache miss for property:24f40f3aa97bd5a6a68f107fbefb3a19:provider1
Initializing service class for provider1: properties.services.provider1.Provider1Service
Submitting request to provider1
Processing provider: provider2
Cache miss for property:24f40f3aa97bd5a6a68f107fbefb3a19:provider2
Initializing service class for provider2: properties.services.provider2.Provider2Service
Submitting request to provider2
Waiting for response from provider1 (timeout: 30s)
Starting new HTTPS connection (1): property-detail-api.fly.dev:443
Starting new HTTPS connection (1): property-detail-api.fly.dev:443
https://property-detail-api.fly.dev:443 "GET /provider-1/property?address=Tampa%2C+Florida HTTP/1.1" 200 None
Received response from provider1
Raw response from provider1: {
  "data": {
    "id": "-Unknown-UNKNOWN-00000",
    "formattedAddress": " Unknown UNKNOWN 00000",
    "addressLine1": "",
    "addressLine2": "Suite 10",
    "city": "Unknown",
    "state": "UNKNOWN",
    "zipCode": "00000",
    "county": "Unknown",
    "latitude": 35.762764,
    "longitude": -84.730106,
    "propertyType": "Condo",
    "bedrooms": 2,
    "bathrooms": 2,
    "squareFootage": 1204,
    "lotSizeSqFt": 5072,
    "yearBuilt": 1952,
    "assessorID": "29086-146-3522",
    "legalDescription": "CB 3869 BLK 3 LOT 3",
    "subdivision": "CONV A/S CODE",
    "zoning": "RS",
    "lastSaleDate": "2022-02-27T00:00:00.000Z",
    "lastSalePrice": 350353,
    "hoa": {
      "fee": 218
    },
    "features": {
      "architectureType": "Contemporary",
      "cooling": true,
      "coolingType": "Window Unit",
      "exteriorType": "Brick",
      "fireplace": false,
      "fireplaceType": "Masonry",
      "floorCount": 2,
      "foundationType": "Slab",
      "garage": true,
      "garageSpaces": 2,
      "garageType": "Detached",
      "heating": true,
      "heatingType": "Electric",
      "pool": true,
      "poolType": "Concrete",
      "roofType": "Asphalt",
      "roomCount": 4,
      "unitCount": 5,
      "viewType": "City",
      "septicSystem": true
    },
    "taxAssessments": {
      "2023": {
        "year": 2023,
        "value": 222817,
        "land": 30608,
        "improvements": 325390
      }
    },
    "propertyTaxes": {
      "2023": {
        "year": 2023,
        "total": 9960
      }
    },
    "history": {
      "2020-03-02": {
        "event": "Sale",
        "date": "2018-12-17T00:00:00.000Z",
        "price": 451509
      }
    }
  },
  "cached": false
}
Waiting for response from provider2 (timeout: 30s)
https://property-detail-api.fly.dev:443 "GET /provider-2/property?address=Tampa%2C+Florida HTTP/1.1" 200 None
Received response from provider2
Raw response from provider2: {
  "data": {
    "ID": "-Unknown-UNKNOWN-00000",
    "NormalizedAddress": " Unknown UNKNOWN 00000",
    "Address1": "",
    "Address2": "Suite 10",
    "City": "Unknown",
    "State": "UNKNOWN",
    "PostalCode": "00000",
    "ArchitecturalStyle": "Contemporary",
    "PropertyType": "Condo",
    "Bedrooms": 2,
    "Bathrooms": 2,
    "SquareFootage": 1204,
    "LotSizeAcres": 0.12,
    "YearConstructed": 1952,
    "HomeownerAssociationFee": 218,
    "LastSaleDate": "2022-02-27T00:00:00.000Z",
    "LastSalePrice": 350353,
    "RoomCount": 4,
    "UnitCount": 5,
    "GarageSpaces": 2,
    "GarageType": "Detached",
    "SepticSystem": true,
    "Cooling": "Window Unit",
    "Heating": "Electric",
    "SalePrice": 350353
  },
  "cached": true
}
Completed data fetch from all providers for address: Tampa, Florida
Raw result from provider1: {
  "data": {
    "id": "-Unknown-UNKNOWN-00000",
    "formattedAddress": " Unknown UNKNOWN 00000",
    "addressLine1": "",
    "addressLine2": "Suite 10",
    "city": "Unknown",
    "state": "UNKNOWN",
    "zipCode": "00000",
    "county": "Unknown",
    "latitude": 35.762764,
    "longitude": -84.730106,
    "propertyType": "Condo",
    "bedrooms": 2,
    "bathrooms": 2,
    "squareFootage": 1204,
    "lotSizeSqFt": 5072,
    "yearBuilt": 1952,
    "assessorID": "29086-146-3522",
    "legalDescription": "CB 3869 BLK 3 LOT 3",
    "subdivision": "CONV A/S CODE",
    "zoning": "RS",
    "lastSaleDate": "2022-02-27T00:00:00.000Z",
    "lastSalePrice": 350353,
    "hoa": {
      "fee": 218
    },
    "features": {
      "architectureType": "Contemporary",
      "cooling": true,
      "coolingType": "Window Unit",
      "exteriorType": "Brick",
      "fireplace": false,
      "fireplaceType": "Masonry",
      "floorCount": 2,
      "foundationType": "Slab",
      "garage": true,
      "garageSpaces": 2,
      "garageType": "Detached",
      "heating": true,
      "heatingType": "Electric",
      "pool": true,
      "poolType": "Concrete",
      "roofType": "Asphalt",
      "roomCount": 4,
      "unitCount": 5,
      "viewType": "City",
      "septicSystem": true
    },
    "taxAssessments": {
      "2023": {
        "year": 2023,
        "value": 222817,
        "land": 30608,
        "improvements": 325390
      }
    },
    "propertyTaxes": {
      "2023": {
        "year": 2023,
        "total": 9960
      }
    },
    "history": {
      "2020-03-02": {
        "event": "Sale",
        "date": "2018-12-17T00:00:00.000Z",
        "price": 451509
      }
    }
  },
  "cached": false
}
Raw result from provider2: {
  "data": {
    "ID": "-Unknown-UNKNOWN-00000",
    "NormalizedAddress": " Unknown UNKNOWN 00000",
    "Address1": "",
    "Address2": "Suite 10",
    "City": "Unknown",
    "State": "UNKNOWN",
    "PostalCode": "00000",
    "ArchitecturalStyle": "Contemporary",
    "PropertyType": "Condo",
    "Bedrooms": 2,
    "Bathrooms": 2,
    "SquareFootage": 1204,
    "LotSizeAcres": 0.12,
    "YearConstructed": 1952,
    "HomeownerAssociationFee": 218,
    "LastSaleDate": "2022-02-27T00:00:00.000Z",
    "LastSalePrice": 350353,
    "RoomCount": 4,
    "UnitCount": 5,
    "GarageSpaces": 2,
    "GarageType": "Detached",
    "SepticSystem": true,
    "Cooling": "Window Unit",
    "Heating": "Electric",
    "SalePrice": 350353
  },
  "cached": true
}
Processing data from provider: provider1
Using mapping for provider1: {'square_footage': 'squareFootage', 'lot_size_acres': ('lotSizeSqFt', <function convert_sqft_to_acres at 0x1116d4720>), 'year_built': 'yearBuilt', 'property_type': 'propertyType', 'bedrooms': 'bedrooms', 'bathrooms': 'bathrooms', 'room_count': ('features', 'roomCount'), 'septic_system': ('features', 'septicSystem'), 'sale_price': 'lastSalePrice'}
Standardized data for provider1: {
  "square_footage": 1204,
  "lot_size_acres": 0.12,
  "year_built": 1952,
  "property_type": "Condo",
  "bedrooms": 2,
  "bathrooms": 2,
  "room_count": 4,
  "septic_system": "Yes",
  "sale_price": 350353,
  "sale_price_formatted": "$350,353",
  "provider": "Provider 1"
}
Data from provider1 successfully validated
Cached data for property:24f40f3aa97bd5a6a68f107fbefb3a19:provider1 with TTL 86400s
Processing data from provider: provider2
Using mapping for provider2: {'square_footage': 'SquareFootage', 'lot_size_acres': 'LotSizeAcres', 'year_built': 'YearConstructed', 'property_type': 'PropertyType', 'bedrooms': 'Bedrooms', 'bathrooms': 'Bathrooms', 'room_count': 'RoomCount', 'septic_system': 'SepticSystem', 'sale_price': 'SalePrice'}
Standardized data for provider2: {
  "square_footage": 1204,
  "lot_size_acres": 0.12,
  "year_built": 1952,
  "property_type": "Condo",
  "bedrooms": 2,
  "bathrooms": 2,
  "room_count": 4,
  "septic_system": "Yes",
  "sale_price": 350353,
  "sale_price_formatted": "$350,353",
  "provider": "Provider 2"
}
Data from provider2 successfully validated
Cached data for property:24f40f3aa97bd5a6a68f107fbefb3a19:provider2 with TTL 86400s
Total providers processed: 2
Final data from provider Provider 1: {
  "square_footage": 1204,
  "lot_size_acres": 0.12,
  "year_built": 1952,
  "property_type": "Condo",
  "bedrooms": 2,
  "bathrooms": 2.0,
  "room_count": 4,
  "septic_system": "Yes",
  "sale_price": 350353,
  "provider": "Provider 1",
  "cached": false
}
Final data from provider Provider 2: {
  "square_footage": 1204,
  "lot_size_acres": 0.12,
  "year_built": 1952,
  "property_type": "Condo",
  "bedrooms": 2,
  "bathrooms": 2.0,
  "room_count": 4,
  "septic_system": "Yes",
  "sale_price": 350353,
  "provider": "Provider 2",
  "cached": false
}
Cached data for property:24f40f3aa97bd5a6a68f107fbefb3a19 with TTL 86400s
Processing request for address: Tampa, Florida
Cache hit for property:24f40f3aa97bd5a6a68f107fbefb3a19
Returning cached results for address: Tampa, Florida
Cached data content: [
  {
    "square_footage": 1204,
    "lot_size_acres": 0.12,
    "year_built": 1952,
    "property_type": "Condo",
    "bedrooms": 2,
    "bathrooms": 2.0,
    "room_count": 4,
    "septic_system": "Yes",
    "sale_price": 350353,
    "provider": "Provider 1",
    "cached": false
  },
  {
    "square_footage": 1204,
    "lot_size_acres": 0.12,
    "year_built": 1952,
    "property_type": "Condo",
    "bedrooms": 2,
    "bathrooms": 2.0,
    "room_count": 4,
    "septic_system": "Yes",
    "sale_price": 350353,
    "provider": "Provider 2",
    "cached": false
  }
]
Cached result from provider: Provider 1
Cached result from provider: Provider 2
